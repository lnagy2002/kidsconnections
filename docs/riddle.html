<!DOCTYPE html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kids’ Connections — Daily</title>
    <style>
         :root {
            --bg: #0e364b;
            --panel: #0e364b;
            --ink: #a9f4f4;
            --cell: #f0db79;
            --accent1: #3b82f6;
            --accent2: #22a699;
            --accent3: #f2b705;
            --accent4: #f25c54;
            --muted: #f0db79;
            --border: #1b2659;
            --key: #0f1736;
            --key-hover: #141f4a;
        }

        body {
            margin: 0;
            font-family: "Rubik", Trebuchet MS, Lucida Grande, Lucida Sans Unicode, Lucida Sans, Tahoma, sans-serif;
            background: var(--bg);
            color: var(--ink);
        }

        .app {
            margin: 20px auto;
            padding: 20px;
            border-radius: 14px;
            width: min(1200px, 96vw);
        }

        .section {
            margin-top: 15px;
            text-align: center;
        }

        h1 {
            margin-bottom: 10px;
            margin-top: 0px;
        }

        .muted {
            color: var(--muted);
            text-align: center;
        }

        .card {
          background-color: #a9f4f4;
          border-radius: 10px;
          padding: 12px;
          text-align: center;
          min-height: 50px;
          height: auto;              /* card grows with content */
          overflow: visible;         /* allow text to push size */
          font-size: 16px;
          text-transform: uppercase;
          cursor: pointer;
          font-weight: bold;
          user-select: none;
          margin-top: 10px;
          color: black;
          transition: background-color 0.3s ease; /* animate only color, not height */
        }

        .btn {
            background: var(--key);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 12px 6px;
            font-weight: 400;
            font-size: 16px;
            color: var(--text);
            margin: 5px;
            width: auto;
        }

        .btn.primary {
            background: #05a9ac;
            color: #000;
            border: none;
        }

        .found-row {
            color: #000;
            display: flex;
            align-items: center;
            margin: 6px 0;
            border-radius: 10px;
            padding: 6px;
            height: 100px;
            font-size: 16px;
            background: var(--accent2);
            text-transform: uppercase;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }

        .pulse {
            animation: pulse 0.6s ease-in-out;
        }

        .title-block {
            display: flex;
            flex-direction: column;
            /* align-items: center; /* centers both title & date */
            */
        }

        .controls {
            display: flex;
            gap: 12px;
            align-items: center;
            padding: 10px 12px;
        }

        @media (max-width: 600px) {
            .app {
                margin: 10px auto;
                padding: 10px;
            }

            .card {
                padding: 8px;
                font-size: 14px;
            }

            .found-row {
                margin: 6px 0;
                border-radius: 10px;
                height: min(100px, 10vh);
                text-transform: uppercase;
            }
        }
        /* .complete-badge { margin-left:10px; font-size:12px; color:#fff; background:green; padding:2px 6px; border-radius:6px;} */
    </style>
      <script src="https://lnagy2002.github.io/kidsconnections/games-menu.js" defer  data-menu="https://lnagy2002.github.io/kidsconnections/games-menu.json"></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KFSR46Z6C8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-KFSR46Z6C8'); // sends page_view automatically
    </script>
</head>

<body>

    <div class="app">
        <section class="panel controls">
            <img src="https://bittobitscom.wordpress.com/wp-content/uploads/2025/08/logo-round-3.png" alt="" height="100px">
            <div class="title-block">
                <h1>Kids’ Riddles</h1>
                <div id="date"></div>
            </div>
        </section>
        <hr>
        <div id="msg" class="section muted" style="margin-left:auto"></div>

        <div id="riddleCard" class="card"></div>
        <div id="foundContainer">
        </div>
        <div class="section">
            <button id="hintBtn" class="btn primary">Show Hint</button>
            <button id="answerBtn" class="btn">Show Answer</button>
        </div>

    </div>
    <script>
        const today = new Date();
        const $ = sel => document.querySelector(sel);
        const $$ = sel => Array.from(document.querySelectorAll(sel));
        // Format it as Month Day, Year (e.g., August 20, 2025)
        const options = {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        };
        const formattedDate = today.toLocaleDateString(undefined, options);

        const mm = String(today.getMonth() + 1).padStart(2, '0'); // Months are 0-based
        const dd = String(today.getDate()).padStart(2, '0');
        const yyyy = today.getFullYear();

        const formattedFileDate = mm + dd + yyyy;
        // Insert into HTML
        document.getElementById("date").textContent = formattedDate;
    </script>
    <script>
        function showMessage(text) {
            document.getElementById("msg").textContent = text;
        }

        let RIDDLES = {};

        function getQueryParam(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name); // returns null if not found
        }

        async function loadData() {
            const level = getQueryParam('level') || 'easy';
            gtag('event', 'riddle_load_level_'  + level, { app: 'riddle' });
            try {
                const res = await fetch('https://lnagy2002.github.io/kidsconnections/data/riddle-' + formattedFileDate + ".json"); // <-- your JSON file
                if (!res.ok) throw new Error(`HTTP ${res.status}`);
                RIDDLES = await res.json();
                renderRiddle(level || "easy"); // render it
            } catch (err) {
                gtag('event', 'riddle_failed_loading_level_'  + level, { app: 'riddle' });
                showMessage(`Couldn’t load data: ${err.message}`);
            }
        }

        function renderRiddle(level) {
            let item = RIDDLES[level];
            showMessage(`• Daily ${level} •`);
            $('#riddleCard').innerHTML = `
            <p>${item.q}</p>
          `;

            $('#foundContainer').innerHTML = `
          <div id="hintBox" class="hint card" style="display:none;"><p>Hint: ${item.hint}</p></div>
          <div id="answerBox" class="answer card" style="display:none;"><p>Answer: ${item.a}</p></div>
          `;

            $('#hintBtn').addEventListener('click', function() {
                gtag('event', 'wordle_hint_clicked', { app: 'wordle' });
                const el = $('#hintBox');
                el.style.display = (el.style.display === 'none') ? 'block' : 'none';
                el.style.background = "#f0db79";
                el.classList.add('pulse');
                const cleanup = () => el.classList.remove('pulse');
                el.addEventListener('animationend', cleanup, {
                    once: true
                }); // fires when CSS animation finishes
                el.addEventListener('animationcancel', cleanup, {
                    once: true
                }); // safety if animation is aborted
                $('#hintBtn').textContent = (el.style.display === 'none') ? 'Show Hint' : 'Hide Hint';
            });
            $('#answerBtn').addEventListener('click', function() {
                gtag('event', 'wordle_answer_clicked', { app: 'wordle' });
                const el = $('#answerBox');
                el.style.display = (el.style.display === 'none') ? 'block' : 'none';
                el.style.background = "#f2b705";
                el.classList.add('pulse');
                const cleanup = () => el.classList.remove('pulse');
                el.addEventListener('animationend', cleanup, {
                    once: true
                }); // fires when CSS animation finishes
                el.addEventListener('animationcancel', cleanup, {
                    once: true
                }); // safety if animation is aborted
                $('#answerBtn').textContent = (el.style.display === 'none') ? 'Show Answer' : 'Hide Answer';
            });
        }

        loadData();
    </script>
</body>

</html>
