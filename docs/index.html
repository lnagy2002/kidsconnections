<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Kidsâ€™ Connections â€” v2</title>
  <style>
    :root {
      --bg:#0e364b; --panel:#0e364b; --ink:#a9f4f4;
      --accent1:#f0db79; --accent2:#22a699; --accent3:#f2b705; --accent4:#f25c54;
    }
    body { margin:0; font-family:"Rubik", Trebuchet MS, Lucida Grande, Lucida Sans Unicode, Lucida Sans, Tahoma, sans-serif; background:var(--bg); color:var(--ink);}
    .app { max-width:960px; margin:20px auto; padding:20px; border-radius:14px; }
    .section {padding: 20px;  text-align: center;}
    #level {
      padding: 10px;
      font-size: 16px;
      border: 2px solid #0e364b;
      border-radius: 8px;
      background-color: #fff;
      color: #0e364b;
      cursor: pointer;
      width: 200px;

      /* Remove default arrow in some browsers */
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;

      /* Add custom arrow */
      background-image: url("data:image/svg+xml;utf8,<svg fill='black' height='24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
      background-repeat: no-repeat;
      background-position: right 10px center; /* move caret inward */
      background-size: 16px;
    }
    h1 { margin-top:0; }
    #message  {
      color: #f0db79;
    }
    .grid { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; margin-top:15px;}
    .card {
      background-color: #a9f4f4; border-radius:10px; padding:12px; text-align:center;  height: 100px;  font-size: 16px; text-transform: uppercase;
      cursor:pointer; font-weight:bold; user-select:none; background:#fff;
    }
    .card[aria-pressed="true"] { background:var(--accent1); }
    .btn { padding:8px 14px; border-radius:8px; cursor:pointer; border:1px solid #ccc; margin:10px; font-size: 16px; font-weight:300;}
    .btn.primary { background:#05a9ac; color:#000; border:none; }
    .found-row { color: #000; display:flex; align-items:center; margin:6px 0; border-radius:10px; padding:6px; height: 100px; font-size: 16px; text-transform: uppercase;}
    .found-label { text-align: center; font-weight:bold; margin-right:10px; padding:4px 8px; border-radius:6px;}
    /* .found-items { display:flex; flex:1; gap:6px;} */
    .found-item { text-align:center; padding:6px; border-radius:6px; background:#f0f0f0;}
    /* .complete-badge { margin-left:10px; font-size:12px; color:#fff; background:green; padding:2px 6px; border-radius:6px;} */
  </style>
</head>
<body>

<div class="app">
  <h1>Kidsâ€™ Connections</h1><h3><span id="date"></span></h3>
  <hr>
  <div class="section">
    <label>Pick the Right Challenge Level (by Grade)
      <select id="level">
        <option value="easy">Easy (Grades 2â€“3)</option>
        <option value="medium">Medium (Grades 3â€“4)</option>
        <option value="hard">Hard (Grades 4â€“5)</option>
      </select>
    </label>
  </div>
  <hr>
  <h3 class="section">Create four groups of four!</h3>
  <div id="foundContainer"></div>
  <div id="grid" class="grid"></div>
  <div class="section" id="message"></div>
  <div class="section">
    <button id="btnSubmit" class="btn primary">Submit</button>
    <button id="btnShuffle" class="btn">Shuffle</button>
    <button id="btnHint" class="btn">Hint</button>
    <button id="btnReset" class="btn">Start Over</button>
  </div>
</div>
<script>
  const today = new Date();

    // Format it as Month Day, Year (e.g., August 20, 2025)
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    const formattedDate = today.toLocaleDateString(undefined, options);

    // Insert into HTML
    document.getElementById("date").textContent = formattedDate;
</script>
<script>
   function showMessage  (text) {
     document.getElementById("message").style.display = "block";
     document.getElementById("message").textContent = text;
   }
</script>
<script>

let state={level:"easy", selected:new Set(), solved:[], items:[]};
let PUZZLE_BANK={};

async function loadData() {
      try {
        const res = await fetch('https://lnagy2002.github.io/kidsconnections/08202025.json');             // <-- your JSON file
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        PUZZLE_BANK = await res.json();
        init("easy");                                    // render it
      } catch (err) {
        const c = document.getElementById('grid');
        c.innerHTML = `<p class="error">Couldnâ€™t load data: ${err.message}</p>`;
        setTimeout(() => c.firstChild?.remove(), 5000);     // auto-hide after 5s (optional)
      }
    }

function init(level){
  state.level=level; state.solved=[]; state.selected=new Set();
  const groups=PUZZLE_BANK[level][0].groups;
  state.items=groups.flatMap(g=>g.items.map(t=>({text:t,group:g.name,color:g.color})));
  state.items.sort(()=>Math.random()-0.5);
  render();
}

function render(){
  const grid=document.getElementById("grid");
  grid.innerHTML="";
  state.items.forEach(it=>{
    if(state.solved.some(g=>g.items.includes(it.text))) return;
    const b=document.createElement("button");
    b.className="card";
    b.textContent=it.text;
    b.setAttribute("aria-pressed", state.selected.has(it.text));
    b.onclick=()=>toggle(it.text);
    grid.appendChild(b);
  });
  renderFound();
}

function renderFound(){
  const c=document.getElementById("foundContainer");
  c.innerHTML="";
  state.solved.forEach(g=>{
    const row=document.createElement("div");
    row.className="found-row";
    row.style.background=g.color;
    const label=document.createElement("h3");
    label.className="found-label";
    // label.style.background=g.color;
    // label.style.color="#fff";
    label.textContent=g.groupName;
    // const badge=document.createElement("span");
    // badge.className="complete-badge";
    // badge.textContent="âœ“ Complete";
    // label.appendChild(badge);
    const itemsDiv=document.createElement("div");
    itemsDiv.className="found-items";
    itemsDiv.textContent = g.items.join(", ");
    // g.items.forEach(it=>{
    //   const span=document.createElement("div");
    //   span.className="found-item";
    //   span.style.background=g.color; span.style.color="#fff";
    //   span.textContent=it;
    //   itemsDiv.appendChild(span);
    // });
    row.appendChild(label); row.appendChild(itemsDiv);
    c.appendChild(row);
  });
}

function toggle(t){
  if(state.selected.has(t)) state.selected.delete(t);
  else {
    if(state.selected.size>=4){ showMessage("Youâ€™ve already picked four tiles!"); return; }
    state.selected.add(t);
  }
  render();
}

function submit(){
  if(state.selected.size!==4) return showMessage ("Try picking four tiles to make a connection!");
  const chosen=Array.from(state.selected);
  const groups=PUZZLE_BANK[state.level][0].groups;
  for(const g of groups){
    if(g.items.every(x=>chosen.includes(x))){
      state.solved.push({groupName:g.name, items:g.items, color:g.color});
      state.selected.clear();
      showMessage ("ðŸ§© Yes! Those tiles belong together!")
      render();
      if(state.solved.length===4) showMessage("ðŸŽ‰ â€œPuzzle Master! You matched them all!!");
      return;
    }
  }
  showMessage ("âŒ Oops, those donâ€™t fit â€” try again!");
  state.selected.clear();
  render();
}

document.getElementById("btnSubmit").onclick=submit;
document.getElementById("btnShuffle").onclick=()=>{state.items.sort(()=>Math.random()-0.5); render();};
document.getElementById("btnReset").onclick=()=>init(state.level);
document.getElementById("btnHint").onclick=()=>showMessage ("Look for 4 things that belong together!");
document.getElementById("level").onchange=(e)=>init(e.target.value);

loadData();
</script>
</body>
</html>
